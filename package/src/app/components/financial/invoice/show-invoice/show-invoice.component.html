<mat-card class="cardWithShadow">
  <mat-card-content>
    <!-- Header -->
    <div class="d-flex align-items-center justify-content-between w-100">
      <mat-card-title>Invoice Details</mat-card-title>
      <a [routerLink]="['/financial/invoice']" class="back-link f-s-14 text-primary">Back to Invoices</a>
    </div>
<div>
    <!-- Main Content -->
    <div class="row m-t-24">
      <!-- Invoice Details (Left Side) -->
      <div class="col-7">
        <h4 class="f-s-24">{{ invoice?.totalAmount | currency: 'USD' }}</h4>
        <div class="d-flex align-items-center m-t-16">
          <button mat-mini-fab class="bg-light-{{ getStatusColor(invoice?.status) }} text-{{ getStatusColor(invoice?.status) }} shadow-none icon-27">
            <mat-icon class="icon-20 d-block">{{ getStatusIcon(invoice?.status) }}</mat-icon>
          </button>
          <div class="f-w-600 f-s-14 m-l-12">{{ invoice?.status | titlecase }}</div>
          <div class="m-l-4 f-s-14">Status</div>
        </div>

        <div class="details-section m-t-32">
          <div class="d-flex align-items-center">
            <mat-icon class="text-primary icon-12 d-flex">receipt</mat-icon>
            <div class="m-l-12 f-s-14"><strong>Invoice Number:</strong> {{ invoice?.invoiceNumber }}</div>
          </div>
          <div class="d-flex align-items-center m-t-8">
            <mat-icon class="text-primary icon-12 d-flex">person</mat-icon>
            <div class="m-l-12 f-s-14"><strong>Issued By:</strong> {{ invoice?.issued_by }}</div>
          </div>
          <div class="d-flex align-items-center m-t-8">
            <mat-icon class="text-primary icon-12 d-flex">person_outline</mat-icon>
            <div class="m-l-12 f-s-14"><strong>Issued To:</strong> {{ invoice?.issued_to }}</div>
          </div>
          <div class="d-flex align-items-center m-t-8">
            <mat-icon class="text-primary icon-12 d-flex">event</mat-icon>
            <div class="m-l-12 f-s-14"><strong>Issue Date:</strong> {{ invoice?.issueDate | date: 'medium' }}</div>
          </div>
          <div class="d-flex align-items-center m-t-8">
            <mat-icon class="text-primary icon-12 d-flex">event_busy</mat-icon>
            <div class="m-l-12 f-s-14"><strong>Due Date:</strong> {{ invoice?.dueDate | date: 'medium' }}</div>
          </div>
          <div class="d-flex align-items-center m-t-8">
            <mat-icon class="text-primary icon-12 d-flex">attach_money</mat-icon>
            <div class="m-l-12 f-s-14"><strong>Tax:</strong> {{ invoice?.tax | currency: 'USD' }}</div>
          </div>
          <div class="d-flex align-items-center m-t-8">
            <mat-icon class="text-primary icon-12 d-flex">money</mat-icon>
            <div class="m-l-12 f-s-14"><strong>Amount:</strong> {{ invoice?.amount | currency: 'USD' }}</div>
          </div>
        </div>

        <!-- Export Buttons -->
        <div class="button-group m-t-32">
          <button mat-raised-button color="primary" (click)="exportToPDF()">Export as PDF</button>
          <button mat-raised-button color="accent" (click)="exportToExcel()" class="m-l-8">Export as Excel</button>
          <button mat-raised-button color="warn" (click)="exportToWord()" class="m-l-8">Export as Word</button>
        </div>
      </div>

      <!-- Pie Chart (Right Side) -->
      <mat-card class="cardWithShadow">
        <mat-card-content>
          <mat-card-title>Total Amount Breakdown</mat-card-title>

          <div class="row m-t-24">
            <div class="col-7">
              <h4 class="f-s-24">{{ invoice?.totalAmount | currency }}</h4>

              <div class="d-flex align-items-center m-t-16">
                <button mat-mini-fab class="bg-light-success text-success shadow-none icon-27">
                  <i-tabler name="arrow-up-right" class="icon-20 d-block"></i-tabler>
                </button>
                <div class="f-w-600 f-s-14 m-l-12">+{{ calculatePercentage(invoice?.amount, invoice?.totalAmount) }}%</div>
                <div class="m-l-4 f-s-14">Base Amount</div>
              </div>
              <div class="d-flex align-items-center m-t-16">
                <button mat-mini-fab class="bg-light-success text-success shadow-none icon-27">
                  <i-tabler name="arrow-up-right" class="icon-20 d-block"></i-tabler>
                </button>
                <div class="f-w-600 f-s-14 m-l-12">+{{ calculatePercentage(invoice?.tax, invoice?.totalAmount) }}%</div>
                <div class="m-l-4 f-s-14">Tax</div>
              </div>

              <div class="d-flex align-items-center m-t-32">
                <div class="d-flex align-items-center" *ngFor="let item of chartData">
                  <i-tabler name="circle-filled" [ngClass]="item.color" class="icon-12 d-flex"></i-tabler>
                  <div class="m-l-12 f-s-14">{{ item.name }}</div>
                </div>
              </div>
            </div>

            <div class="col-5 d-flex align-items-start">
              <apx-chart
                [series]="invoiceChart.series"
                [labels]="invoiceChart.labels"
                [dataLabels]="invoiceChart.dataLabels"
                [chart]="invoiceChart.chart"
                [legend]="invoiceChart.legend"
                [colors]="invoiceChart.colors"
                [stroke]="invoiceChart.stroke"
                [tooltip]="invoiceChart.tooltip"
                [plotOptions]="invoiceChart.plotOptions"
                [responsive]="invoiceChart.responsive"
              ></apx-chart>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
</div>
  </mat-card-content>
</mat-card>
